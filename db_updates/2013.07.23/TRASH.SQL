CREATE TABLE TRASHTELEGRAMS 
(
  ID NUMBER NOT NULL 
, CREATED TIMESTAMP(6) DEFAULT SYS_EXTRACT_UTC(SYSTIMESTAMP) NOT NULL 
, TEXT VARCHAR2(4000 CHAR) NOT NULL 
, HEADER VARCHAR2(4000 CHAR) 
, MESSAGE VARCHAR2(4000 CHAR) 
, PROCESSED NUMBER DEFAULT 0 
, CONSTRAINT TRASHTELEGRAMS_PK PRIMARY KEY 
  (
    ID 
  )
  ENABLE 
);

CREATE SEQUENCE  "TRASHTELEGRAMS_SEQ"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;

create or replace 
TRIGGER "TRASHTELEGRAMS_TRG" BEFORE INSERT ON TRASHTELEGRAMS 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    SELECT TRASHTELEGRAMS_SEQ.NEXTVAL INTO :NEW.ID FROM DUAL;
  END COLUMN_SEQUENCES;
END;
/

create or replace 
TRIGGER "TRASHTELEGRAMS_LT" 
AFTER INSERT OR UPDATE OR DELETE ON TRASHTELEGRAMS
FOR EACH ROW
BEGIN
-- Touch the row
  update sys_tables_info set lasttouch = SYS_EXTRACT_UTC(SYSTIMESTAMP) where tablename ='TRASHTELEGRAMS';
END;
/

INSERT INTO sys_tables_info (TABLENAME) VALUES ('TRASHTELEGRAMS');
commit;

